<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cashier Dashboard – Café POS</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="cashier.css">
<body>

<!-- Navbar -->
  <header>
    <div class="navbar">
      <a href="home.html">Home</a>
      <a href="menu.html">Menu</a>
      <a href="cashier.html">Order</a>
      <a href="report.html">Report</a>
    </div>
  </header>

    <!-- Main content: Carousel + Login -->
    <div class="container mt-4">
    <div class="row align-items-center">
        <!-- Carousel -->
        <div class="col-md-8">
        <div id="peekCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="uploads/starmenu.png" alt="Image 1">
            </div>
            <div class="carousel-item">
                <img src="uploads/squidmeu.png" alt="Image 2">
            </div>
            <div class="carousel-item">
                <img src="uploads/starmenu.png" alt="Image 3">
            </div>
            </div>
        </div>
        </div>

        <!-- Login box (optional for cashier if needed) -->
        <div class="col-md-4">
        <div class="login-box p-4">
            <h2>Cashier Panel</h2>
            <p>Welcome, <strong id="cashier-name">Employee</strong> Work Hard!</p>
        </div>
        </div>
    </div>
    </div>

    <!-- Checkout / Order section -->
    <div class="checkout-section">
    <h4>Customer Orders</h4>

    <!-- Sample customer -->
    <div class="customer-card">
        <span>Customer #1</span>
        <button onclick="toggleOrder('order1')">View Orders</button>
    </div>
    <div id="order1" class="order-modal" style="display:none;">
        <div class="order-item">
        <span>Starlight Jelly x1</span>
        <span>₱120</span>
        </div>
        <div class="order-item">
        <span>Squidja x2</span>
        <span>₱180</span>
        </div>
       <button type="button" class="btn btn-primary btn-sm" onclick="openAddItemModal('order1')">
            Add More Items
        </button>

    </div>

    <div class="customer-card">
        <span>Customer #2</span>
        <button onclick="toggleOrder('order2')">View Orders</button>
    </div>
    <div id="order2" class="order-modal" style="display:none;">
        <div class="order-item">
        <span>Chocolate Frappe x1</span>
        <span>₱150</span>
        </div>
        <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addItemsModal">
            Add More Items
        </button>

    </div>

    </div>

        <!-- Add Items Modal -->
    <div class="modal fade" id="addItemsModal" tabindex="-1" aria-labelledby="addItemsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addItemsModalLabel">Add Items</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row" id="items-list">
                    <!-- Sample items -->
                    <div class="col-md-4 mb-3">
                        <div class="card">
                        <img src="uploads/starmenu.png" class="card-img-top" alt="Caramel Latte">
                        <div class="card-body text-center">
                            <h6 class="card-title">Caramel Latte</h6>
                            <p>₱120</p>
                            <button class="btn btn-success btn-sm" onclick="addToOrderModal('Caramel Latte', 120)">Add</button>
                        </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="card">
                        <img src="uploads/squidmeu.png" class="card-img-top" alt="Espresso">
                        <div class="card-body text-center">
                            <h6 class="card-title">Espresso</h6>
                            <p>₱90</p>
                            <button class="btn btn-success btn-sm" onclick="addToOrderModal('Espresso', 90)">Add</button>
                        </div>
                        </div>
                    </div>
                    <!-- Add more items here -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer mt-5">
        <div class="container text-center py-4">
            <p>&copy; 2025 Café POS. All rights reserved.</p>
            <p>
                <a href="#" class="footer-link">Privacy Policy</a> | 
                <a href="#" class="footer-link">Terms of Service</a>
            </p>
            <div class="social-icons mt-2">
                <a href="#"><img src="uploads/facebook-icon.png" alt="Facebook" class="social-icon"></a>
                <a href="#"><img src="uploads/instagram-icon.png" alt="Instagram" class="social-icon"></a>
                <a href="#"><img src="uploads/twitter-icon.png" alt="Twitter" class="social-icon"></a>
            </div>
        </div>
    </footer>

    <script>

    let currentOrderId = ""; // Track which order is being updated
    const ordersData = {}; // Store orders and quantities

         // Get the username from URL
        const urlParams = new URLSearchParams(window.location.search);
        const username = urlParams.get('username');

        // Set the username in the welcome text
        if (username) {
            document.getElementById('cashier-name').textContent = username;
        }


        function toggleOrder(id) {
        const el = document.getElementById(id);
        el.style.display = (el.style.display === 'none') ? 'block' : 'none';
        }

       // Open Add Item Modal
        function addToOrderModal(itemName, itemPrice) {
        if (!currentOrderId) return;

        const orderDiv = document.getElementById(currentOrderId).querySelector('.order-items');
        ordersData[currentOrderId] = ordersData[currentOrderId] || {};

        if (ordersData[currentOrderId][itemName]) {
            ordersData[currentOrderId][itemName].quantity += 1;
        } else {
            ordersData[currentOrderId][itemName] = { price: itemPrice, quantity: 1 };
        }

        renderOrder(currentOrderId);

        // Close modal
        const modalEl = document.getElementById('addItemsModal');
        const modal = bootstrap.Modal.getInstance(modalEl);
        modal.hide();
        }

        // Render order items and total
        function renderOrder(orderId) {
        const orderDiv = document.getElementById(orderId).querySelector('.order-items');
        orderDiv.innerHTML = '';
        let total = 0;
        for (let item in ordersData[orderId]) {
            const { price, quantity } = ordersData[orderId][item];
            total += price * quantity;
            const div = document.createElement('div');
            div.classList.add('order-item');
            div.innerHTML = `<span>${item} x${quantity}</span><span>₱${price*quantity}</span>`;
            orderDiv.appendChild(div);
        }
        document.getElementById(orderId).querySelector('.total-amount').textContent = total;
        }

        // Checkout function with payment
        function checkout(orderId) {
        const total = document.getElementById(orderId).querySelector('.total-amount').textContent;
        const receiptDiv = document.getElementById(orderId).querySelector('.receipt');
        let paymentMethod = prompt(`Total: ₱${total}\nEnter payment method (Cash/Card):`);
        if (!paymentMethod) return;

        let changeText = '';
        if (paymentMethod.toLowerCase() === 'cash') {
            const cashGiven = parseFloat(prompt('Enter cash given:'));
            const change = cashGiven - parseFloat(total);
            changeText = `Change: ₱${change >= 0 ? change : 0}`;
        }

        receiptDiv.style.display = 'block';
        receiptDiv.innerHTML = `
            <h6>Receipt</h6>
            <p>Cashier: ${username}</p>
            <p>Payment: ${paymentMethod}</p>
            ${changeText ? `<p>${changeText}</p>` : ''}
            <hr>
        `;

        for (let item in ordersData[orderId]) {
            const { price, quantity } = ordersData[orderId][item];
            receiptDiv.innerHTML += `<p>${item} x${quantity} = ₱${price*quantity}</p>`;
        }

        receiptDiv.innerHTML += `<hr><p>Total Paid: ₱${total}</p>`;

        // Clear the order after checkout
        ordersData[orderId] = {};
        renderOrder(orderId);
        }
        </script>  

       

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
